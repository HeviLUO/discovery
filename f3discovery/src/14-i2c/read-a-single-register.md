# 读取单个寄存器

让我们把所有这些理论付诸实践吧！

就像USART外围设备一样，我已经在你到达`main`之前完成了初始化，所以你只需要处理以下寄存器：

- `CR2`. 控制寄存器2。
- `ISR`. 中断和状态寄存器。
- `TXDR`. 传输数据寄存器。
- `RXDR`. 接收数据寄存器。

这些寄存器记录在参考手册的以下章节中：

> 第28.7节I2C寄存器-第868页-参考手册

我们将结合引脚`PB6` (`SCL`)和`PB7` (`SDA`)使用`I2C1`外围设备。

这次你不必布线，因为传感器在板上，并且已经连接到微控制器。
但是，我建议您断开串行/蓝牙模块与F3的连接，以便于操作。稍后，我们会把棋盘移动很多。

您的任务是编写一个程序，读取磁强计的`IRA_REG_M`寄存器的内容。
此寄存器为只读，始终包含值`0b01001000`。

微控制器将扮演I2C主控器的角色，LSM303DLHC内的磁强计将成为I2C从控器。

这是启动码。你必须实现`TODO`。

``` rust
{{#include src/main.rs}}
```

为了给您一些额外的帮助，以下是您要使用的确切位字段：

- `CR2`: `SADD1`, `RD_WRN`, `NBYTES`, `START`, `AUTOEND`
- `ISR`: `TXIS`, `RXNE`, `TC`
- `TXDR`: `TXDATA`
- `RXDR`: `RXDATA`
